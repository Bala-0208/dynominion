<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:macro name="dynominion_base">

  <xacro:macro name="visual_collision" params="stl material">
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh
            filename="file://$(find dynominion_description)/meshes/${stl}" />
        </geometry>
        <material
          name="${material}"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh
            filename="file://$(find dynominion_description)/meshes/${stl}" />
        </geometry>
      </collision>
  </xacro:macro>

  <link name="base_footprint" />

  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0.0925" rpy="0 0 0"/>
  </joint>

  <link name="base_link">
    <inertial>
      <origin
        xyz="-2.08718083181733E-06 -6.63266502241936E-05 0.108362368707114"
        rpy="0 0 0" />
      <mass
        value="37.9896815067854" />
      <inertia
        ixx="0.912512689540164"
        ixy="0.000178877572156337"
        ixz="3.67556951191397E-05"
        iyy="0.672787505255827"
        iyz="6.40317168517927E-06"
        izz="1.50799767993211" />
    </inertial>
    <xacro:visual_collision stl="base_link.STL" material="base_link"/>
  </link>


  <joint name="left_wheel_joint" type="continuous">
    <origin
      xyz="0 0.306 0.0500"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="left_wheel" />
    <axis
      xyz="0 1 0" />
    <dynamics damping="0.3"/>
  </joint>

  <link name="left_wheel">
    <inertial>
      <origin
        xyz="-6.8084E-18 -0.0145 2.0817E-17"
        rpy="0 0 0" />
      <mass
        value="2.6657" />
      <inertia
        ixx="0.0063899"
        ixy="3.4604E-19"
        ixz="2.4937E-19"
        iyy="0.012138"
        iyz="-2.6948E-19"
        izz="0.0063899" />
    </inertial>
    <xacro:visual_collision stl="left_wheel_l2.STL" material="wheel"/>
  </link>

  <joint name="right_wheel_joint" type="continuous">
    <origin
      xyz="0 -0.306 0.0500"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="right_wheel" />
    <axis
      xyz="0 1 0" />
    <dynamics damping="0.3"/>
  </joint>

  <link name="right_wheel">
    <inertial>
      <origin
        xyz="5.6256E-18 0.0145 9.0206E-17"
        rpy="0 0 0" />
      <mass
        value="2.6657" />
      <inertia
        ixx="0.0063899"
        ixy="1.0787E-18"
        ixz="-6.4004E-19"
        iyy="0.012138"
        iyz="1.1622E-18"
        izz="0.0063899" />
    </inertial>
    <xacro:visual_collision stl="right_wheel_l1.STL" material="wheel"/>
  </link>

  <link name="laser">
    <inertial>
      <origin
        xyz="-0.00041464 -8.5349E-05 -0.017667"
        rpy="0 0 0" />
      <mass
        value="0.035797" />
      <inertia
        ixx="1.2463E-05"
        ixy="-2.4586E-09"
        ixz="1.6242E-08"
        iyy="1.2418E-05"
        iyz="-4.2084E-09"
        izz="2.2872E-05" />
    </inertial>
    <xacro:visual_collision stl="lidar_l3.STL" material="lidar"/>
  </link>

  <joint name="laser_joint" type="fixed">
    <origin
      xyz="0.24971 0 0.1932"
      rpy="0 0 3.1415926535897931" />
    <parent
      link="base_link" />
    <child
      link="laser" />
    <axis
      xyz="0 0 0" />
  </joint>

  <link name="imu_link">
    <inertial>
      <origin
        xyz="-0.092447 -0.001269 -0.012304"
        rpy="0 0 0" />
      <mass
        value="0.40139" />
      <inertia
        ixx="0.0041061"
        ixy="3.6427E-06"
        ixz="-7.2802E-06"
        iyy="0.0018697"
        iyz="-9.9936E-08"
        izz="0.0059728" />
    </inertial>
    <xacro:visual_collision stl="imu_l4.STL" material="imu"/>
  </link> 

  <joint name="imu_joint" type="fixed">
    <origin
      xyz="0.0 0 0.101"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="imu_link" />
    <axis
      xyz="0 0 0" />
  </joint>

  <link name="gps"/>

  <joint name="gps_joint" type="fixed">
    <origin
      xyz="0.275 0 0.230"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="gps" />
    <axis
      xyz="0 0 0" />
  </joint>
  
  </xacro:macro>

</robot>